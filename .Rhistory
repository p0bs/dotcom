axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
library(tidyverse)
library(sf)
geography <- sf::st_read(
"data/Lower_Layer_Super_Output_Areas_December_2011_Super_Generalised_Clipped__Boundaries_in_England_and_Wales.dbf")
st_crs(x = geography) <- 4326
str(geography)
summary(geography)
attr(geography)
data <- read_csv("data/ScoredAreas1a.csv")
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((15 * Time) +
Wtd.Ave +
(6 * Affordability) +
(6 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric)) %>%
arrange(desc(score)) %>%
filter(score > 0.75)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
geom_hline(aes(yintercept = 200000)) +
geom_vline(aes(xintercept = 500000)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
# geom_hline(aes(yintercept = 200000)) +
# geom_vline(aes(xintercept = 500000)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((15 * Time) +
Wtd.Ave +
(6 * Affordability) +
(6 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((15 * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((2 * Time * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((Time * Time * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((3* Time * Time * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((5 * Time * Time * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((0.5 * Time * Time * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((6 * Time * Time * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((6 * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((9 * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((12 * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
library(tidyverse)
library(sf)
geography <- sf::st_read(
"data/Lower_Layer_Super_Output_Areas_December_2011_Super_Generalised_Clipped__Boundaries_in_England_and_Wales.dbf")
st_crs(x = geography) <- 4326
data <- read_csv("data/ScoredAreas1a.csv")
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((12 * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((15 * Time) +
Wtd.Ave +
(6 * Affordability) +
(12 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_text(size = 8),
axis.text.y = element_text(size = 8)
)
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((15 * Time) +
Wtd.Ave +
(5 * Affordability) +
(10 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
blogdown:::serve_site()
library(tidyverse)
library(sf)
geography <- sf::st_read(
"data/Lower_Layer_Super_Output_Areas_December_2011_Super_Generalised_Clipped__Boundaries_in_England_and_Wales.dbf")
st_crs(x = geography) <- "4326"
library(tidyverse)
library(sf)
geography <- sf::st_read(
"data/Lower_Layer_Super_Output_Areas_December_2011_Super_Generalised_Clipped__Boundaries_in_England_and_Wales.dbf")
st_crs(x = geography) <- 4326
data <- read_csv("data/ScoredAreas1a.csv")
finalData <- data %>%
select(id:IMD.score) %>%
mutate_if(is.numeric, funs(scale)) %>%
mutate(score =
((15 * Time) +
Wtd.Ave +
(5 * Affordability) +
(10 * IMD.score)) * -1) %>%
select(id, score) %>%
mutate(score = scale(score)) %>%
left_join(geography, by = c("id" = "lsoa11cd")) %>%
mutate_at(.vars = "score", funs(as.numeric))
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
geom_map(aes(x = 695043.73, y = 5679921.05)) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
geom_hline(aes(695043.73)) +
geom_vline(aes(5679921.05)) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
geom_hline(aes(yintercept = 695043.73)) +
geom_vline(aes(xintercept = 5679921.05)) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
geom_hline(aes(yintercept = 695043.73)) + coord_equal() +
geom_vline(aes(xintercept = 5679921.05)) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
geom_hline(aes(yintercept = 695043.73)) + coord_sf() +
geom_vline(aes(xintercept = 5679921.05)) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
geom_hline(aes(yintercept = 695043.73)) +
geom_vline(aes(xintercept = 5679921.05)) +
+ coord_sf() +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
geom_hline(aes(yintercept = 695043.73)) +
geom_vline(aes(xintercept = 5679921.05)) +
coord_sf() +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
coord_sf(datum=st_crs(4326)) +
theme_minimal()
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
annotate("point",
x = 5679921.05,
y = 695043.73,
colour = "red",
size = 4) +
coord_sf() +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
annotate("point",
x = 695043.73,
y = 5679921.05,
colour = "red",
size = 0.2) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
annotate("point",
x = 679921.05,
y = 695043.73,
colour = "red",
size = 0.2) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis")
ggplot(data = finalData) +
geom_sf(aes(fill = score, colour = score)) +
scale_fill_continuous(type = "viridis") +
scale_colour_continuous(type = "viridis") +
annotate("point",
x = 520000,
y = 160000,
colour = "red",
size = 0.2) +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.text.y = element_blank()
)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
